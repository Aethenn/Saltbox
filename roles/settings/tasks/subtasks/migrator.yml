#########################################################################
# Title:         Saltbox: Settings | Migrator                           #
# Author(s):     desimaniac                                             #
# URL:           https://github.com/saltyorg/Saltbox                    #
# --                                                                    #
#########################################################################
#                   GNU General Public License v3.0                     #
#########################################################################
---
- name: Migrator | Migrations for all config files
  block:

    - name: Migrator | All | Migration 01
      include_tasks: "migrator/all/migration_01.yml"

    - name: Migrator | All | Migration 02
      include_tasks: "migrator/all/migration_02.yml"
      when: (file != "backup_config.yml")

  when: (file != "ansible.cfg")

- name: Migrator | Migrations for 'ansible.cfg'
  block:

    - name: Migrator | 'ansible.cfg' | Migration 01
      include_tasks: "migrator/ansible_cfg/migration_01.yml"

  when: (file == "ansible.cfg")

- name: Migrator | Migrations for 'accounts.yml'
  block:

    - name: Migrator | 'accounts.yml' | Migration 01
      include_tasks: "migrator/accounts_yml/migration_01.yml"

  when: (file == "accounts.yml")

- name: Migrator | Migrations for 'accounts.yml'
  block:

    - name: Migrator | 'adv_settings.yml' | Migration 01
      include_tasks: "migrator/adv_settings_yml/migration_01.yml"

    - name: Migrator | 'adv_settings.yml' | Migration 02
      include_tasks: "migrator/adv_settings_yml/migration_02.yml"

  when: (file == "adv_settings.yml")

- name: Migrator | Migrations for 'backup_config.yml'
  block:

    - name: Migrator | 'backup_config.yml' | Migration 01
      include_tasks: "migrator/backup_config_yml/migration_01.yml"

  when: (file == "backup_config.yml")
